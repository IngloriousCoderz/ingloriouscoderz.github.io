{"version":3,"file":"static/webpack/static/development/pages/icy.js.96616247252dd18d19eb.hot-update.js","sources":["webpack:///./components/icy/index.js"],"sourcesContent":["import { memo, useRef, useState, useEffect } from 'react'\n\nimport Icy from './icy'\n\nconst MAX_HEAD_TILT_X = 400\nconst MAX_HEAD_TILT_Y = 400\n\nfunction LogoContainer({\n  size = 64,\n  faces = [\n    { image: 'I', reverse: false, eye: true },\n    { image: 'C', reverse: false, eye: false },\n  ],\n  preventScroll = false,\n}) {\n  const [coords, setCoords] = useState({ x: 0, y: 0 })\n\n  const logo = useRef()\n\n  let center = null\n  let moveEvent = null\n\n  const onMove = (event) => {\n    const { target, pageX, pageY } =\n      moveEvent === 'touchmove' ? event.touches[0] : event\n\n    if (preventScroll && closestAncestor(target, 'logo')) {\n      event.preventDefault()\n    }\n\n    setCoords({\n      x: saturate(pageX - center.x, MAX_HEAD_TILT_X),\n      y: saturate(pageY - center.y, MAX_HEAD_TILT_Y),\n    })\n  }\n\n  useEffect(() => {\n    const { left, top, width, height } = logo.current.getBoundingClientRect()\n\n    center = {\n      x: window.pageXOffset + left + width / 2,\n      y: window.pageYOffset + top + height / 2,\n    }\n\n    moveEvent = isTouchDevice() ? 'touchmove' : 'mousemove'\n    document.addEventListener(moveEvent, onMove, {\n      passive: !preventScroll,\n    })\n\n    return () => {\n      document.removeEventListener(moveEvent, onMove)\n    }\n  }, [])\n\n  return <Icy size={size} faces={faces} {...coords} ref={logo} />\n}\n\nLogoContainer.defaultProps = {\n  size: 64,\n  faces: [\n    { image: 'I', reverse: false, eye: true },\n    { image: 'C', reverse: false, eye: false },\n  ],\n  preventScroll: false,\n}\n\nexport default memo(LogoContainer)\n\nfunction isTouchDevice() {\n  if (\n    'ontouchstart' in window ||\n    (window.DocumentTouch && document instanceof DocumentTouch)\n  ) {\n    return true\n  }\n\n  // include the 'heartz' as a way to have a non matching mediaQuery to help terminate the join\n  // https://git.io/vznFH\n  const prefixes = ' -webkit- -moz- -o- -ms- '.split(' ')\n  var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('')\n  return window.matchMedia(query).matches\n}\n\nfunction saturate(num, limit) {\n  if (num < -limit) return -limit\n  if (num > limit) return limit\n  return num\n}\n\nfunction closestAncestor(el, className) {\n  const limit = 4\n  let i = 0\n  let closest = el\n  while (closest && i < limit) {\n    if (\n      closest.className == null ||\n      typeof closest.className.split !== 'function'\n    ) {\n      return null\n    }\n\n    const classes = closest.className.split(' ')\n    if (classes.includes(className)) {\n      return closest\n    }\n\n    closest = closest.parentNode\n    i++\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AAEA;AACA;AACA;AACA;AAOA;AAAA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AADA;AACA;AAAA;AAAA;AADA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAFA;AAKA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AANA;AASA;AACA;AACA;AACA;AAIA;AACA;AAGA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}