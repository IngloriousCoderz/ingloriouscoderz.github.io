{"version":3,"file":"static/webpack/static/development/pages/index.js.bbbfe19792f2f0298056.hot-update.js","sources":["webpack:///./components/logo/index.js"],"sourcesContent":["import { PureComponent } from 'react'\n\nimport Logo from './logo'\n\nconst MAX_HEAD_TILT_X = 400\nconst MAX_HEAD_TILT_Y = 400\n\nclass LogoContainer extends PureComponent {\n  state = { x: 0, y: 0 }\n\n  logo = React.createRef()\n\n  onMove = event => {\n    const { preventScroll } = this.props\n    const { target, pageX, pageY } =\n      this.moveEvent === 'touchmove' ? event.touches[0] : event\n\n    if (preventScroll && closestAncestor(target, 'logo')) {\n      event.preventDefault()\n    }\n\n    const x = saturate(pageX - this.center.x, MAX_HEAD_TILT_X)\n    const y = saturate(pageY - this.center.y, MAX_HEAD_TILT_Y)\n\n    this.setState({ x, y })\n  }\n\n  componentDidMount() {\n    const { preventScroll } = this.props\n\n    const {\n      left,\n      top,\n      width,\n      height,\n    } = this.logo.current.getBoundingClientRect()\n\n    this.center = {\n      x: window.pageXOffset + left + width / 2,\n      y: window.pageYOffset + top + height / 2,\n    }\n\n    console.log(this.center)\n\n    this.moveEvent = isTouchDevice() ? 'touchmove' : 'mousemove'\n    document.addEventListener(this.moveEvent, this.onMove, {\n      passive: !preventScroll,\n    })\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(this.moveEvent, this.onMove)\n  }\n\n  render() {\n    const { size, faces } = this.props\n\n    return <Logo size={size} faces={faces} {...this.state} ref={this.logo} />\n  }\n}\n\nLogoContainer.defaultProps = {\n  size: 64,\n  faces: [\n    { image: 'I', reverse: false, eye: true },\n    { image: 'C', reverse: false, eye: false },\n  ],\n  preventScroll: false,\n}\n\nexport default LogoContainer\n\nfunction isTouchDevice() {\n  if (\n    'ontouchstart' in window ||\n    (window.DocumentTouch && document instanceof DocumentTouch)\n  ) {\n    return true\n  }\n\n  // include the 'heartz' as a way to have a non matching mediaQuery to help terminate the join\n  // https://git.io/vznFH\n  const prefixes = ' -webkit- -moz- -o- -ms- '.split(' ')\n  var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('')\n  return window.matchMedia(query).matches\n}\n\nfunction saturate(num, limit) {\n  if (num < -limit) return -limit\n  if (num > limit) return limit\n  return num\n}\n\nfunction closestAncestor(el, className) {\n  const limit = 4\n  let i = 0\n  let closest = el\n  while (closest && i < limit) {\n    if (\n      closest.className == null ||\n      typeof closest.className.split !== 'function'\n    ) {\n      return null\n    }\n\n    const classes = closest.className.split(' ')\n    if (classes.includes(className)) {\n      return closest\n    }\n\n    closest = closest.parentNode\n    i++\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;AACA;AACA;AAFA;AAKA;AAEA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;;;AAEA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;AAnDA;AACA;AAqDA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AANA;AASA;AACA;AACA;AACA;AAIA;AACA;AAGA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}