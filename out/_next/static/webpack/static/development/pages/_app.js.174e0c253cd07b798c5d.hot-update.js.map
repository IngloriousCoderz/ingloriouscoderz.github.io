{"version":3,"file":"static/webpack/static/development/pages/_app.js.174e0c253cd07b798c5d.hot-update.js","sources":["webpack:///./pages/hoc/withGA.js"],"sourcesContent":["import { Component } from 'react'\n\nconst IS_BROWSER = typeof window !== 'undefined'\nconst GA_LOCAL_STORAGE_KEY = 'ga:clientId'\n\nexport const withGA = (code, Router) => Enhanced =>\n  class extends Component {\n    pageview = () => ga('send', 'pageview')\n\n    static async getInitialProps(...args) {\n      const getEnhancedInitialProps = Enhanced.getInitialProps\n      return getEnhancedInitialProps\n        ? await getEnhancedInitialProps(...args)\n        : {}\n    }\n\n    componentDidMount() {\n      if (window._ga_initialized) return\n      ;(function(i, s, o, g, r, a, m) {\n        i['GoogleAnalyticsObject'] = r\n        ;(i[r] =\n          i[r] ||\n          function() {\n            ;(i[r].q = i[r].q || []).push(arguments)\n          }),\n          (i[r].l = 1 * new Date())\n        ;(a = s.createElement(o)), (m = s.getElementsByTagName(o)[0])\n        a.async = 1\n        a.src = g\n        m.parentNode.insertBefore(a, m)\n      })(\n        window,\n        document,\n        'script',\n        'https://www.google-analytics.com/analytics.js',\n        'ga',\n      )\n\n      ga('create', code, {\n        storage: 'none',\n        clientId: localStorage.getItem(GA_LOCAL_STORAGE_KEY),\n      })\n\n      ga(tracker => {\n        console.log(tracker)\n        localStorage.setItem(GA_LOCAL_STORAGE_KEY, tracker.get('clientId'))\n      })\n\n      window._ga_initialized = true\n      this.pageview()\n\n      const previousCallback = Router.onRouteChangeComplete\n      Router.onRouteChangeComplete = () => {\n        if (typeof previousCallback === 'function') {\n          previousCallback()\n        }\n        this.pageview()\n      }\n    }\n\n    render() {\n      return <Enhanced {...this.props} />\n    }\n  }\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAEA;AAAA;AACA;AAHA;AAAA;AACA;AADA;AAAA;AAAA;AAWA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAGA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAOA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AArDA;AAAA;AAAA;AAwDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAzDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AANA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}