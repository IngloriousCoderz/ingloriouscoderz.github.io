{"version":3,"file":"static/webpack/static/development/pages/_app.js.3a0a321cad20e79d5e2f.hot-update.js","sources":["webpack:///./pages/hoc/withGA.js"],"sourcesContent":["import { useEffect } from 'react'\n\nconst IS_BROWSER = typeof window !== 'undefined'\nconst GA_LOCAL_STORAGE_KEY = 'ga:clientId'\n\nexport const withGA = (code, Router) => (Enhanced) => {\n  function WithGA() {\n    useEffect(() => {\n      if (!IS_BROWSER || window._ga_initialized) return\n      ;(function (i, s, o, g, r, a, m) {\n        i['GoogleAnalyticsObject'] = r\n        ;(i[r] =\n          i[r] ||\n          function () {\n            ;(i[r].q = i[r].q || []).push(arguments)\n          }),\n          (i[r].l = 1 * new Date())\n        ;(a = s.createElement(o)), (m = s.getElementsByTagName(o)[0])\n        a.async = 1\n        a.src = g\n        m.parentNode.insertBefore(a, m)\n      })(\n        window,\n        document,\n        'script',\n        'https://www.google-analytics.com/analytics.js',\n        'ga'\n      )\n\n      ga('create', code, {\n        storage: 'none',\n        clientId: localStorage.getItem(GA_LOCAL_STORAGE_KEY),\n      })\n\n      ga((tracker) => {\n        localStorage.setItem(GA_LOCAL_STORAGE_KEY, tracker.get('clientId'))\n      })\n\n      window._ga_initialized = true\n      pageview()\n\n      const previousCallback = Router.onRouteChangeComplete\n      Router.onRouteChangeComplete = () => {\n        if (typeof previousCallback === 'function') {\n          previousCallback()\n        }\n        pageview()\n      }\n    }, [])\n\n    const pageview = () => {\n      const { pathname, search } = location\n      ga('send', 'pageview', pathname + search)\n    }\n\n    return <Enhanced {...this.props} />\n  }\n\n  WithGA.getInitialProps = async (...args) => {\n    const getEnhancedInitialProps = Enhanced.getInitialProps\n    return getEnhancedInitialProps ? await getEnhancedInitialProps(...args) : {}\n  }\n\n  return WithGA\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAGA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAOA;AACA;AACA;AAFA;AAKA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AA3DA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}